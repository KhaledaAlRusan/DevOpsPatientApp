trigger:
- main

pool:
  vmImage: 'macOS-latest'

stages:
- stage: Build
  jobs:
  - job: BuildAndTest
    steps:
    - task: Gradle@2
      inputs:
        workingDirectory: ''
        gradleWrapperFile: 'gradlew'
        gradleOptions: '-Xmx3072m'
        publishJUnitResults: false
        testResultsFiles: '**/TEST-*.xml'
        tasks: 'clean build'
    - task: PublishBuildArtifacts@1
      inputs:
        pathtoPublish: 'app/build/outputs/apk/debug/app-debug.apk'
        artifactName: 'drop'
        publishLocation: 'Container'